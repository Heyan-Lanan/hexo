---
title: 基于Plotly的动态可视化绘图-1
math: true
date: 2022-3-7 22:57:00
comment: 'waline'
mermaid: true
index_img: /img/index.jpg
categories: Python
tags: Plotly
---

​	今天决定开个大坑，谈谈一个非常优秀的顶级绘图模块——<span class="label label-primary">Plotly</span>。在此之前我用过一些绘图软件或者是模块，大一做无机实验的时候习惯用Excel，后来算法课分析运行时间的时候也用到了，之后做大物用到了origin，应该是用过的最不友好的绘图软件了，个人觉得操作及其繁琐，后来参加美赛用亿图图示画一些流程图和树状图，以及markdown也支持流程图，最后就是<span class="label label-primary">Python</span>可视化绘图库——<span class="label label-primary">Matplotlib</span>了，Matplotlib就是MATLAB+Plot+Library，即模仿MATLAB的绘图库，其绘图风格与MATLAB类似。但Matplotlib主要存在两大缺陷：首先，Matplotlib是一个静态的绘图模块，即我们绘出的图像是静态的，就像用看图软件打开图片一样，没有网页绘图的交互式效果；其次，Matplotlib绘图结果的分享很不方便，在绘图结果分享给别人时只能以图片的方式分享，别人看到的绘图结果完全是静态的，这种体验很不好。　　

​	为了解决上述的一些问题，Plotly应运而生，它是一个基于JavaScript的动态绘图模块。Plotly的绘图效果与我们在网页上看到的动态交互式绘图效果是一样的，其默认的绘图结果是一个HTML网页文件，通过浏览器就可以查看。我们可以把这个HTML文件分享给其他人，对方看到的效果与我们在本机上看到的效果完全一样。它和ECharts有点类似。

​	我们从下面最简单的一个例子开始，导入plotly模块，使用plotly.graph_objs.Scatter绘制画迹，再将画迹集成，最后绘制整个图形并输出。

```python
import plotly.graph_objs as go

trace0 = go.Scatter(  # 用数据生成画迹
    x=[1, 2, 3, 4],
    y=[10, 15, 13, 17]
)
trace1 = go.Scatter(
    x=[1, 2, 3, 4],
    y=[16, 5, 11, 9]
)

data = [trace0, trace1]  # 集成多个画迹
fig = go.Figure(data)  # 绘制图形
fig.show()  # 图形输出
```





​     可以设置三种模式，分别是<p class="note note-primary">mode='markers',#xtr1,散点图</p><p class="note note-primary">mode='lines',#xtr2,线形图</p><p class="note note-primary">mode='lines+markers',#xtr3,线形图+散点图组合</p>

```python
import plotly as py
import plotly.graph_objs as go
import numpy as np  # 产生随机数
pyplt = py.offline.plot  # 预定义

N = 100
random_x = np.linspace(0, 1, N)  # 生成 0-1 100个数字的均匀序列
random_y0 = np.random.randn(N) + 5  # 生成N个随机数序列
random_y1 = np.random.randn(N)
random_y2 = np.random.randn(N) - 5

# Create traces
trace0 = go.Scatter(
    x=random_x,
    y=random_y0,
    mode='markers',  # 纯散点的绘图
    name='markers'  # 曲线名称
)
trace1 = go.Scatter(
    x=random_x,
    y=random_y1,
    mode='lines+markers',  # 散点+线的绘图
    name='lines+markers'
)
trace2 = go.Scatter(
    x=random_x,
    y=random_y2,
    mode='lines',  # 线的绘图
    name='lines'
)

data = [trace0, trace1, trace2]
pyplt(data, filename='tmp/scatter_basic_demo.html')
```
<div align="center"><iframe width="800" height="600" frameborder="0" scrolling="no" src="//plotly.com/~ningyu/5.embed"></iframe></div>
​	还可以设置散点和线段的颜色和宽度，以及是否显示x，y方向的0刻度线。

```python
import plotly as py
import plotly.graph_objs as go
import numpy as np

pyplt = py.offline.plot

N = 500
x = np.random.randn(N)

trace0 = go.Scatter(
    x=np.random.randn(N),
    y=np.random.randn(N) + 2,
    name='Above',
    mode='markers+lines',  # 散点+线的绘图
    marker=dict(
        size=10,  # 设置点的宽度
        color='rgba(152, 0, 0, .8)',  # 设置点的颜色
        line=dict(
            width=2,  # 设置线条的宽度
            color='rgb(0, 0, 0)'  # 设置线条的颜色
        )
    )
)

trace1 = go.Scatter(
    x=np.random.randn(N),
    y=np.random.randn(N) - 2,
    name='Below',
    mode='markers',
    marker=dict(
        size=10,
        color='rgba(255, 182, 193, .9)'
    )
)

data = [trace0, trace1]

layout = dict(title='Styled Scatter',
              yaxis=dict(zeroline=True),  # 显示y轴的0刻度线
              xaxis=dict(zeroline=False)  # 不显示x轴的0刻度线
              )

fig = dict(data=data, layout=layout)
pyplt(fig, filename='tmp/scatter_style.html')
```